{% load wagtailcore_tags wagtailimages_tags %}
{% load article_filters %}

<div class="image-with-block-quote">
    {% if value.align_quote == "left" %}
        <div class="quote-container left">
            {{ value.quote }}
        </div>
    {% endif %}
    <div class="image-with-caption {{ value.align_quote }} " style="width: {{ value.image_width }}px;">
        <div class="image-block">
            {% if value.image_width > 560 %}
                {% image value.image max-1400x1120 as image %}
            {% else %}
                {% image value.image max-700x560 as image %}
            {% endif %}
            <div class="image" style="width:{{ value.image_width }}px">
                {% image value.image max-1400x1120 as slide_image %}
                <img src="{{ image.url }}" style="width:{{ value.image_width }}px"
{#                     {% if value.fill_container %}style="position:relative;max-height:inherit;"{% endif %}#}
                     data-src="{{ slide_image.url }}"/>
            </div>
            <div class="photo-credits">
                {% if image.image.photographers.all %}
                    PHOTO CREDIT â€¢
                    {% for photographer in image.image.photographers.all %}
                        {{ photographer }}
                        {% if not forloop.last %},&ensp;
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </div>
        </div>
        <div class="caption">{{ value.caption }}</div>
    </div>
    {% if value.align_quote == "right" %}
        <div class="quote-container right">
            {{ value.quote }}
        </div>
    {% endif %}
</div>