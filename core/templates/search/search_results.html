{% extends "base.html" %}
{% load i18n wagtailimages_tags %}

{% block meta_title %}
Search{% if search_results %} Results{% endif %}
{% endblock %}

{% block main %}
<div itemscope itemtype="http://schema.org/SearchResultsPage" class="search-result-panel">

  <div class="search-panel">
    <div class="container">
      <header class="seach-input-panel">
        <form action="/search/" role="search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction" class="search-form">
          <meta itemprop="target" content="/search/?q={q}">
          <input type="text" name="q" value="{{ query_string }}" placeholder="Enter to search" itemprop="query-input">
          <span class="search-icon fa fa-search"></span>
        </form>
      </header>
      {% if search_results %}
        <section class="search-result">
          <ul>
            {% for result in search_results %}
              <li class="result item">
                <a href="{{ result.specific.get_absolute_url }}">
                  <div class="item-image">
                    {% if result.specific.featured_image %}
                      {% image result.specific.featured_image fill-278x225 as featured_image %}
                      <img src="{{ featured_image.url }}">
                    {% else %}
                      <img src="{{ STATIC_URL }}img/default_featured_image.png" alt="{{ result.specific.title }}" width="278" height="225">
                    {% endif %}
                  </div>
                  {% include "article/includes/default_atom.html" with article=result.specific %}
                  <div class="date link-dark font-xs">{{result.specific.latest_revision_created_at|date}}</div>
                </a>
              </li>
              {% endfor %}
          </ul>
          {% include "includes/paginator.html" with results=search_results %}
        </section>
      {% else %}
          <div class="result-not-found">
            <p class="not-found-msg">Sorry, could not find any results for "{{ query }}". Please try a different query.</p>
          </div>
      {% endif %}
    </div>
  </div>
</div>
<script type="text/javascript">
  document.getElementById("main_content").style.marginBottom = "0px";
</script>
{% endblock %}
